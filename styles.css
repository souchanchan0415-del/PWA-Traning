/* ===== Design tokens ===== */
:root{
  --bg: #0e1116;
  --card:#141922;
  --text:#e8eef6;
  --muted:#a9b4c0;
  --line:#2a3140;
  --primary:#0fb6a9;
  --danger:#e85b5b;

  --radius:16px;
  --shadow: 0 6px 24px rgba(0,0,0,.25);
}

html[data-theme="light"]{
  --bg:#f6f7fb;
  --card:#ffffff;
  --text:#1b2430;
  --muted:#5b6a79;
  --line:#e7ebf2;
  --shadow:0 6px 20px rgba(27,36,48,.08);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; color:var(--text); background:radial-gradient(1200px 600px at 50% -200px, rgba(15,182,169,.07), transparent 60%) , var(--bg);
  font: 16px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
}

/* ===== Appbar / Tabs ===== */
.appbar{ position:sticky; top:0; z-index:10; backdrop-filter:saturate(180%) blur(10px); background:linear-gradient(to bottom, rgba(0,0,0,.35), transparent), var(--bg); padding:12px 16px 8px; }
.logo{ margin:0 0 10px; font-size:28px; font-weight:800; letter-spacing:.2px; }
.tabs{ display:flex; gap:12px; flex-wrap:wrap; }
.tabs button{
  appearance:none; border:none; cursor:pointer; padding:10px 16px; border-radius:999px;
  background:var(--card); color:var(--text); box-shadow:var(--shadow); border:1px solid var(--line);
}
.tabs button.active{ background:var(--primary); color:#fff; border-color:transparent; }

/* ===== Layout ===== */
.container{ max-width:1000px; margin:20px auto 80px; padding:0 16px; }
.card{
  background:var(--card); border:1px solid var(--line); border-radius:var(--radius); padding:18px;
  box-shadow:var(--shadow); margin:20px 0;
}
h3{ margin:0 0 12px; font-size:18px; }

.row{ display:flex; gap:12px; align-items:center; margin:10px 0; flex-wrap:wrap; }
.grid{ display:grid; gap:12px; }
.grid-2{ grid-template-columns: 1fr 160px; }
.grid-3{ grid-template-columns: repeat(3, 1fr); }
.end{ justify-content:flex-end; }

/* ===== Inputs ===== */
input, select, textarea, button{
  font:inherit; color:inherit;
}
input, select{
  background:color-mix(in oklab, var(--card), #000 5%); color:var(--text);
  border:1px solid var(--line); border-radius:12px; padding:12px 14px; min-height:44px;
  flex:1 1 220px;
}
select{ padding-right:40px; }
label{ min-width:56px; color:var(--muted); }

button{
  appearance:none; border:1px solid var(--line); background:var(--primary); color:#fff;
  padding:12px 16px; border-radius:12px; cursor:pointer; min-height:44px;
}
button.ghost{ background:transparent; color:var(--text); }
button.danger{ background:var(--danger); border-color:transparent; color:#fff; }
.btnlike{ display:inline-block; padding:12px 16px; border:1px solid var(--line); border-radius:12px; cursor:pointer; }

/* ===== Chipset (部位) ===== */
.chipset{ display:flex; gap:10px; flex-wrap:wrap; }
.chip{
  padding:10px 14px; border-radius:999px; border:1px solid var(--line);
  background:color-mix(in oklab, var(--card), #000 6%); color:var(--text); cursor:pointer;
}
.chip.active{ background:var(--primary); color:#fff; border-color:transparent; }

/* ===== Lists ===== */
.list{ list-style:none; padding:0; margin:0; }
.list li{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  border-top:1px dashed var(--line); padding:12px 4px;
}
.badge{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:color-mix(in oklab, var(--card), #000 8%); border:1px solid var(--line); font-size:12px; }
.legend{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
.legend .chip{ padding:6px 10px; }
.kv{ display:grid; grid-template-columns: 140px 1fr; gap:8px; }

/* Switch / checkbox */
.switch{ display:flex; align-items:center; gap:10px; }
.check{ display:flex; align-items:center; gap:10px; }

/* Toast */
.toast{
  position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
  background:#111c; color:#fff; padding:10px 14px; border-radius:999px; opacity:0; pointer-events:none; transition:opacity .2s, transform .2s;
}
.toast.show{ opacity:1; transform:translateX(-50%) translateY(-4px); }

/* Tabs content */
.tab{ display:none; }
.tab.active{ display:block; }

/* Responsive tweaks */
@media (max-width: 700px){
  .grid-2{ grid-template-columns:1fr; }
  .grid-3{ grid-template-columns:1fr 1fr; }
}
@media (min-width: 1100px){
  .logo{ font-size:32px; }
}
/* --- iOS Safari での入力欄はみ出し対策 --- */
.row > * { min-width: 0; }           /* flex 子要素を縮められるように */
.grid > * { min-width: 0; }          /* grid 子要素も同様 */
.grid-3 input,
.grid-3 select { width: 100%; }      /* 列幅にきっちり収める */

/* 狭い画面では「＋追加」を改行してセレクトに幅を譲る */
@media (max-width: 560px){
  #btnAddEx{ flex-basis: 100%; }     /* 種目行でボタンが次行に回る */
}

/* 種目セレクトの行と次の行が重なって見えないように余白を確保 */
#exSelect { margin-bottom: 6px; }    /* 必要なら値は好みで微調整 */